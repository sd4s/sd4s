PACKAGE BODY unapiev4 AS

CURSOR C_SYSTEM (A_SETTING_NAME VARCHAR2) IS
   SELECT SETTING_VALUE
   FROM UTSYSTEM
   WHERE SETTING_NAME = A_SETTING_NAME;

P_STARTMETHODONCELLCREATION      CHAR(1);
L_CNT                            NUMBER;
L_SQL_STRING                     VARCHAR2(4000);
L_RESULT                         NUMBER;
L_RET_CODE                       NUMBER;
L_EV_SEQ_NR                      NUMBER;
L_TIMED_EVENT_TP                 UTEV.EV_TP%TYPE;
L_EV_DETAILS                     VARCHAR2(2000);

L_AR                             UNAPIGEN.CHAR1_TABLE_TYPE;
L_NR_OF_ROWS                     NUMBER;
L_SS_STR                         VARCHAR2(255);
L_TRANSITION_OK                  INTEGER;
L_VALID_SPECSA                   CHAR(1);
L_VALID_SPECSB                   CHAR(1);
L_VALID_SPECSC                   CHAR(1);
L_VALID_LIMITSA                  CHAR(1);
L_VALID_LIMITSB                  CHAR(1);
L_VALID_LIMITSC                  CHAR(1);
L_VALID_TARGETA                  CHAR(1);
L_VALID_TARGETB                  CHAR(1);
L_VALID_TARGETC                  CHAR(1);
L_CAL_RESULT                     CHAR(1);
L_REF_DATE                       TIMESTAMP WITH TIME ZONE;
L_DELAYED_TILL                   TIMESTAMP WITH TIME ZONE;
L_ALLOW_MODIFY                   CHAR(1);
L_ACTIVE                         CHAR(1);
L_FETCHED                        BOOLEAN;
L_ST                             VARCHAR2(20);
L_SVGK_VALUE                     UNAPIGEN.VC40_TABLE_TYPE;
L_OLD_RQ                         VARCHAR2(20);
L_NEW_RQ                         VARCHAR2(20);
L_DELETE_OLDER_THAN              TIMESTAMP WITH TIME ZONE;   
L_CURR_DIFF                      INTEGER;
L_PREV_WEEK_NR                   INTEGER;
L_SVALARMS_HANDLED               CHAR(1);
L_SVSC                           UNAPIGEN.VC20_TABLE_TYPE;
L_SVPG                           UNAPIGEN.VC20_TABLE_TYPE;
L_SVPGNODE                       UNAPIGEN.LONG_TABLE_TYPE;
L_SVPA                           UNAPIGEN.VC20_TABLE_TYPE;
L_SVPANODE                       UNAPIGEN.LONG_TABLE_TYPE;
L_SVVALUE_F                      UNAPIGEN.FLOAT_TABLE_TYPE;
L_SVVALUE_S                      UNAPIGEN.VC40_TABLE_TYPE;
L_SVUNIT                         UNAPIGEN.VC20_TABLE_TYPE;
L_SVEXEC_END_DATE                UNAPIGEN.DATE_TABLE_TYPE;
L_SVEXECUTOR                     UNAPIGEN.VC20_TABLE_TYPE;
L_SVMANUALLY_ENTERED             UNAPIGEN.CHAR1_TABLE_TYPE;
L_SVREANALYSIS                   UNAPIGEN.NUM_TABLE_TYPE;
L_SVMODIFY_FLAG                  UNAPIGEN.NUM_TABLE_TYPE;
L_SVNR_OF_ROWS                   NUMBER;
L_COUNT                          INTEGER;
L_OLD_START_DATE                 TIMESTAMP WITH TIME ZONE;
L_OLD_END_DATE                   TIMESTAMP WITH TIME ZONE;
L_NEW_START_DATE                 TIMESTAMP WITH TIME ZONE;
L_NEW_END_DATE                   TIMESTAMP WITH TIME ZONE;
L_LOG_HS_DETAILS                 CHAR(1);

STPERROR                         EXCEPTION;

CURSOR L_ASSIGNED_METHODS_CURSOR IS
   SELECT ME, MENODE, DELAY, DELAY_UNIT, LC, LC_VERSION, SS, MT_VERSION
   FROM UTSCME
   WHERE SC = UNAPIEV.P_SC
     AND PG = UNAPIEV.P_PG
     AND PGNODE = UNAPIEV.P_PGNODE
     AND PA = UNAPIEV.P_PA
     AND PANODE = UNAPIEV.P_PANODE;

CURSOR L_ASSIGNED_PARAMETERS_CURSOR IS
   SELECT PA, PANODE, DELAY, DELAY_UNIT, LC, LC_VERSION, SS, PR_VERSION
   FROM UTSCPA
   WHERE SC = UNAPIEV.P_SC
     AND PG = UNAPIEV.P_PG
     AND PGNODE = UNAPIEV.P_PGNODE;
     
CURSOR L_SCPA_CURSOR (C_SC VARCHAR2, C_PG VARCHAR2, C_PGNODE NUMBER, C_PA VARCHAR2,
                      C_PANODE NUMBER) IS
   SELECT UNIT, VALUE_F
   FROM UTSCPA
   WHERE SC = C_SC
   AND PG = C_PG
   AND PGNODE = C_PGNODE
   AND PA = C_PA
   AND PANODE = C_PANODE;
L_SCPA_REC L_SCPA_CURSOR%ROWTYPE;

CURSOR L_SCMECELL_CHECK_CURSOR(C_SC VARCHAR2, 
                               C_PG VARCHAR2, C_PGNODE NUMBER, 
                               C_PA VARCHAR2, C_PANODE NUMBER, 
                               C_ME VARCHAR2, C_MENODE NUMBER) IS
    SELECT COUNT(SC)
    FROM UTSCMECELL
    WHERE SC = C_SC
      AND PG = C_PG
      AND PGNODE = C_PGNODE
      AND PA = C_PA
      AND PANODE = C_PANODE
      AND ME = C_ME
      AND MENODE = C_MENODE
      AND CELL_TP='K'
      AND VALUE_F IS NULL
      AND VALUE_S IS NULL;

CURSOR L_SCPGOLDDATES_CURSOR(A_SC VARCHAR2, A_PG VARCHAR2, A_PGNODE NUMBER) IS
SELECT LOG_HS_DETAILS, EXEC_START_DATE, EXEC_END_DATE
FROM UTSCPG
WHERE SC = A_SC
AND PG = A_PG
AND PGNODE = A_PGNODE;

CURSOR L_SCPAOLDDATES_CURSOR(A_SC VARCHAR2, A_PG VARCHAR2, A_PGNODE NUMBER, A_PA VARCHAR2, A_PANODE NUMBER) IS
SELECT LOG_HS_DETAILS, EXEC_START_DATE, EXEC_END_DATE
FROM UTSCPA
WHERE SC = A_SC
AND PG = A_PG
AND PGNODE = A_PGNODE
AND PA = A_PA
AND PANODE = A_PANODE;

CURSOR L_SCMEOLDDATES_CURSOR(A_SC VARCHAR2, A_PG VARCHAR2, A_PGNODE NUMBER, A_PA VARCHAR2, A_PANODE NUMBER, A_ME VARCHAR2, A_MENODE NUMBER) IS
SELECT LOG_HS_DETAILS, EXEC_START_DATE, EXEC_END_DATE
FROM UTSCME
WHERE SC = A_SC
AND PG = A_PG
AND PGNODE = A_PGNODE
AND PA = A_PA
AND PANODE = A_PANODE
AND ME = A_ME
AND MENODE = A_MENODE;

FUNCTION GETVERSION
   RETURN VARCHAR2
IS
BEGIN
   RETURN('06.07.00.00_00.13');
EXCEPTION
   WHEN OTHERS THEN
      RETURN (NULL);
END GETVERSION;

PROCEDURE HANDLESCPGEVENTS   
IS
BEGIN
   
   
   
   IF UNAPIEV.P_EV_REC.EV_TP = 'ParameterGroupCreated' THEN
                             

      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG('ParameterGroupCreated');
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNACCESS.INITOBJECTACCESSRIGHTS(UNAPIEV.P_EV_REC.OBJECT_TP,
                                                       UNAPIEV.P_EV_REC.OBJECT_ID,
                                                      L_AR);
         IF UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG('      InitObjectAR: '|| L_RET_CODE);
         END IF;
         IF L_RET_CODE = UNAPIGEN.DBERR_SUCCESS THEN
            
            L_SQL_STRING := 'UPDATE utscpg SET ';
            FOR I IN 1..UNAPIGEN.P_DATADOMAINS LOOP
               IF I < UNAPIGEN.P_DATADOMAINS THEN
                  L_SQL_STRING := L_SQL_STRING || 'ar' || I || ' = :ar' || I || ', ';
               ELSE
                  L_SQL_STRING := L_SQL_STRING || 'ar' || I || ' = :ar' || I;
               END IF;
            END LOOP;
            L_SQL_STRING := L_SQL_STRING || ' WHERE sc = :sc ' ||  
                            'AND pg = :pg ' || 
                            'AND pgnode = :pgnode ';
            DBMS_SQL.PARSE(UNAPIEV.L_OBJ_CURSOR, L_SQL_STRING, DBMS_SQL.V7); 
            FOR I IN 1..UNAPIGEN.P_DATADOMAINS LOOP
               DBMS_SQL.BIND_VARIABLE_CHAR(UNAPIEV.L_OBJ_CURSOR, ':ar'|| I, L_AR(I), 1);
            END LOOP;
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':sc', UNAPIEV.P_SC);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pg', UNAPIEV.P_PG);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pgnode', UNAPIEV.P_PGNODE);
            L_RESULT := DBMS_SQL.EXECUTE(UNAPIEV.L_OBJ_CURSOR);
         END IF;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
                                        
         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
   
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         
         
         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PgStatusChanged' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         

         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
      
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PgCanceled' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         

         
         UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
            'pp_version='||UNAPIEV.P_PP_VERSION;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, TRUE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, TRUE);
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         
         
         
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, TRUE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PgDetailsReanalysis' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
   
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         

         
         UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
            'pp_version='||UNAPIEV.P_PP_VERSION;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         
         
         
         

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;
   
   ELSIF UNAPIEV.P_EV_REC.EV_TP IN
        ('PgLifeCycleChanged',
         'PgAttributesUpdated', 
         'PgAccessRightsUpdated') THEN
        
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
   
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP IN ('ParameterGroupUpdated',
                                    'ClosePg'                ) THEN
                                   
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
         IF NVL(UNAPIEV.P_SS_TO,'####') = '@D' THEN

            FOR L_ASSIGNED_PARAMETERS_REC IN L_ASSIGNED_PARAMETERS_CURSOR LOOP
   
               UNAPIEV.P_PA := L_ASSIGNED_PARAMETERS_REC.PA;
               UNAPIEV.P_PANODE := L_ASSIGNED_PARAMETERS_REC.PANODE;

               UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
               UNAPIEV.P_EV_REC.OBJECT_LC := L_ASSIGNED_PARAMETERS_REC.LC;
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := L_ASSIGNED_PARAMETERS_REC.LC_VERSION;
               UNAPIEV.P_EV_REC.OBJECT_SS := L_ASSIGNED_PARAMETERS_REC.SS;
               UNAPIEV.P_SS_TO := '@D';

               
               
               
               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);
   
               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'panode='||UNAPIEV.P_PANODE||'#pr_version='||UNAPIEV.P_PR_VERSION;
               END IF;

               
               
               
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
   
               
               
               
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);
   
               
               
               
               FOR L_ASSIGNED_METHODS_REC IN L_ASSIGNED_METHODS_CURSOR LOOP

                  UNAPIEV.P_ME := L_ASSIGNED_METHODS_REC.ME;
                  UNAPIEV.P_MENODE := L_ASSIGNED_METHODS_REC.MENODE;

                  UNAPIEV.P_EV_REC.OBJECT_TP := 'me';
                  UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_ME;
                  UNAPIEV.P_EV_REC.OBJECT_LC := L_ASSIGNED_METHODS_REC.LC;
                  UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := L_ASSIGNED_METHODS_REC.LC_VERSION;
                  UNAPIEV.P_EV_REC.OBJECT_SS := L_ASSIGNED_METHODS_REC.SS;
                  UNAPIEV.P_SS_TO := '@D';
   
                  
                  
                  
                  L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

                  
                  IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                     UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                        'menode='||UNAPIEV.P_MENODE||'#mt_version='||UNAPIEV.P_MT_VERSION||
                        '#reanalysis='||UNAPIEV.P_REANALYSIS;
                  END IF;
         






                  
                  
                  
                  UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);

                  
                  
                  
                  L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                                 UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               
               
               
               END LOOP;
            
            
            
            END LOOP;
         END IF;

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'ParameterGroupDeleted' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG('ParameterGroupDeleted');
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         
         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         UNAPIEV3.UPDATESCALLDATES(FALSE, TRUE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN

         UNAPIEV3.UPDATERQALLDATES(FALSE, TRUE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
   
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         UNAPIEV3.UPDATESDALLDATES(FALSE, TRUE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PgActivate' THEN
                                 
   
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         
         
         BEGIN
            SELECT DELAYED_TILL 
            INTO L_REF_DATE
            FROM UTDELAY
            WHERE OBJECT_TP = 'pg'
            AND SC = UNAPIEV.P_SC
            AND PG = UNAPIEV.P_PG
            AND PGNODE = UNAPIEV.P_PGNODE;
         EXCEPTION
         WHEN NO_DATA_FOUND THEN
            L_REF_DATE := UNAPIEV2.L_CURRENT_TIMESTAMP;
         END;

         
         
         
         
         DELETE FROM UTDELAY
         WHERE SC = UNAPIEV.P_SC
           AND PG = UNAPIEV.P_PG
           AND PGNODE = UNAPIEV.P_PGNODE;
           
         
         
         
         
         DELETE FROM UTEVTIMED
         WHERE OBJECT_TP = 'pa'
           AND INSTR(EV_DETAILS, 'sc=' || UNAPIEV.P_SC) <> 0
           AND INSTR(EV_DETAILS, 'pg=' || UNAPIEV.P_PG) <> 0
           AND INSTR(EV_DETAILS, 'pgnode=' ||
               TO_CHAR(UNAPIEV.P_PGNODE)) <> 0
           AND EV_TP = 'PaActivate';

         DELETE FROM UTEVTIMED
         WHERE OBJECT_TP = 'me'
           AND INSTR(EV_DETAILS, 'sc=' || UNAPIEV.P_SC) <> 0
           AND INSTR(EV_DETAILS, 'pg=' || UNAPIEV.P_PG) <> 0
           AND INSTR(EV_DETAILS, 'pgnode=' ||
               TO_CHAR(UNAPIEV.P_PGNODE)) <> 0
           AND EV_TP = 'MeActivate';

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
   
         
         
         
         L_FETCHED := FALSE;
         FOR L_ASSIGNED_PARAMETERS_REC IN L_ASSIGNED_PARAMETERS_CURSOR LOOP
   
            UNAPIEV.P_PA := L_ASSIGNED_PARAMETERS_REC.PA;
            UNAPIEV.P_PANODE := L_ASSIGNED_PARAMETERS_REC.PANODE;
            UNAPIEV.P_SS_TO := '';
   
            
            
            
            
            IF NVL(L_ASSIGNED_PARAMETERS_REC.DELAY, 0) = 0 THEN

               
               
               
               L_EV_SEQ_NR  := -1;
               L_TIMED_EVENT_TP := 'PaActivate';
               L_EV_DETAILS := 'sc=' || UNAPIEV.P_SC || 
                               '#pg=' || UNAPIEV.P_PG || 
                               '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) || 
                               '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) ||
                               '#pr_version=' || L_ASSIGNED_PARAMETERS_REC.PR_VERSION;
               L_RESULT :=
                  UNAPIEV.INSERTEVENT('Event~PgActivate',
                                      UNAPIGEN.P_EVMGR_NAME,
                                      'pa', UNAPIEV.P_PA,
                                      L_ASSIGNED_PARAMETERS_REC.LC,
                                      L_ASSIGNED_PARAMETERS_REC.LC_VERSION,
                                      L_ASSIGNED_PARAMETERS_REC.SS,
                                      L_TIMED_EVENT_TP, L_EV_DETAILS,
                                      L_EV_SEQ_NR);
               IF L_RESULT <> UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIGEN.P_TXN_ERROR := L_RESULT;
                  RAISE STPERROR;
               END IF;

             ELSE
               
               
                   
               L_RET_CODE := UNAPIAUT.CALCULATEDELAY(L_ASSIGNED_PARAMETERS_REC.DELAY,
                                                     L_ASSIGNED_PARAMETERS_REC.DELAY_UNIT,
                                                     L_REF_DATE, L_DELAYED_TILL);
               
               
               
               INSERT INTO UTDELAY(SC, PG, PGNODE,
                                   PA, PANODE, OBJECT_TP,
                                   DELAY, DELAY_UNIT, DELAYED_FROM, DELAYED_FROM_TZ,
                                   DELAYED_TILL, DELAYED_TILL_TZ)
               VALUES(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE,
                      'pa', L_ASSIGNED_PARAMETERS_REC.DELAY,
                      L_ASSIGNED_PARAMETERS_REC.DELAY_UNIT, L_REF_DATE, L_REF_DATE,
                      L_DELAYED_TILL, L_DELAYED_TILL);
   
               
               
               
               L_EV_SEQ_NR  := -1;
               L_TIMED_EVENT_TP := 'PaActivate';
               L_EV_DETAILS := 'sc=' || UNAPIEV.P_SC || 
                               '#pg=' || UNAPIEV.P_PG || 
                               '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) || 
                               '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) || 
                               '#pr_version=' || L_ASSIGNED_PARAMETERS_REC.PR_VERSION;
               L_RESULT :=
                  UNAPIEV.INSERTTIMEDEVENT('Event~PgActivate',
                                           UNAPIGEN.P_EVMGR_NAME,
                                           'pa', UNAPIEV.P_PA,
                                           L_ASSIGNED_PARAMETERS_REC.LC,
                                           L_ASSIGNED_PARAMETERS_REC.LC_VERSION,
                                           L_ASSIGNED_PARAMETERS_REC.SS,
                                           L_TIMED_EVENT_TP, L_EV_DETAILS,
                                           L_EV_SEQ_NR, L_DELAYED_TILL);
               IF L_RESULT <> UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIGEN.P_TXN_ERROR := L_RESULT;
                  RAISE STPERROR;
               END IF;
   
               
               
               
               UNAPIEV.P_SS_TO := '@D';
   
            END IF;
   
            UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
            UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
            UNAPIEV.P_EV_REC.OBJECT_LC := L_ASSIGNED_PARAMETERS_REC.LC;
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := L_ASSIGNED_PARAMETERS_REC.LC_VERSION;
            UNAPIEV.P_EV_REC.OBJECT_SS := L_ASSIGNED_PARAMETERS_REC.SS;
   
            
            
            
            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);
   
            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'panode='||UNAPIEV.P_PANODE||'#pr_version='||UNAPIEV.P_PR_VERSION;
            END IF;

            
            
            
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
   
            
            
            
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
   
         
         
         
         END LOOP;
   
         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   END IF;
END HANDLESCPGEVENTS;

PROCEDURE HANDLESCPAEVENTS   
IS
BEGIN
   
   
   
   IF UNAPIEV.P_EV_REC.EV_TP = 'ParameterCreated' THEN
                               
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG('ParameterCreated');
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNACCESS.INITOBJECTACCESSRIGHTS(UNAPIEV.P_EV_REC.OBJECT_TP,
                                                       UNAPIEV.P_EV_REC.OBJECT_ID, L_AR);
         IF UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG('      InitObjectAR: '|| L_RET_CODE);
         END IF;
         IF L_RET_CODE = UNAPIGEN.DBERR_SUCCESS THEN
            
            L_SQL_STRING := 'UPDATE utscpa SET ';
            FOR I IN 1..UNAPIGEN.P_DATADOMAINS LOOP
               IF I < UNAPIGEN.P_DATADOMAINS THEN
                  L_SQL_STRING := L_SQL_STRING || 'ar' || I || ' = :ar' || I || ', ';
               ELSE
                  L_SQL_STRING := L_SQL_STRING || 'ar' || I || ' = :ar' || I;
               END IF;
            END LOOP;
            L_SQL_STRING := L_SQL_STRING || ' WHERE sc = :sc ' ||  
                            'AND pg = :pg ' || 
                            'AND pgnode = :pgnode '||
                            'AND pa = :pa ' || 
                            'AND panode = :panode ';

            DBMS_SQL.PARSE(UNAPIEV.L_OBJ_CURSOR, L_SQL_STRING, DBMS_SQL.V7); 
            FOR I IN 1..UNAPIGEN.P_DATADOMAINS LOOP
               DBMS_SQL.BIND_VARIABLE_CHAR(UNAPIEV.L_OBJ_CURSOR, ':ar'|| I, L_AR(I), 1);
            END LOOP;
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':sc', UNAPIEV.P_SC);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pg', UNAPIEV.P_PG);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pgnode', UNAPIEV.P_PGNODE);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pa', UNAPIEV.P_PA);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':panode', UNAPIEV.P_PANODE);
            L_RESULT := DBMS_SQL.EXECUTE(UNAPIEV.L_OBJ_CURSOR);
         END IF;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
                                        
         L_RET_CODE := UNAPIPA.COPYAVAILABLEPARESULT(UNAPIEV.P_SC, 
                                                  UNAPIEV.P_PG, UNAPIEV.P_PGNODE,
                                                  UNAPIEV.P_PA, UNAPIEV.P_PANODE);
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
            INSERT INTO UTERROR(CLIENT_ID, APPLIC, WHO, LOGDATE, LOGDATE_TZ, API_NAME, ERROR_MSG)
            VALUES(UNAPIEV.P_EV_REC.CLIENT_ID, UNAPIEV.P_EV_REC.APPLIC, UNAPIGEN.P_USER, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
                   'EventManager', 'CopyAvailablePaResult returned ' || TO_CHAR(L_RET_CODE)||
                   'sc='||UNAPIEV.P_SC||'#pg='||UNAPIEV.P_PG||'#pgnode='||UNAPIEV.P_PGNODE||
                                        '#pa='||UNAPIEV.P_PA||'#panode='||UNAPIEV.P_PANODE);
         END IF;
         IF UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG('      CopyAvailablePaResult: '|| L_RET_CODE);
         END IF;
                                        
         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         
         UNAPIEV3.UPDATESCPGALLDATES(TRUE, FALSE);

         
         
         
         
         
         
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, FALSE);

         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, FALSE);
                  
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, FALSE);
         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   
   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PaStatusChanged' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         
         
         
         
   
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;
   
   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PaCanceled' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         
         
         
         
  
         
         UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
            'pr_version='||UNAPIEV.P_PR_VERSION;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         
         
         
         UNAPIEV3.UPDATESCPGALLDATES(TRUE, TRUE);
                                   
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, TRUE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, TRUE);
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;
      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, TRUE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PaReanalysis' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         
         
         
         
   
         
         UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
            'pr_version='||UNAPIEV.P_PR_VERSION;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
   
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         
         
         
         
         
         
      
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP IN
         ('PaSpecsUpdated',
          'PaValidationDone', 
          'PaAssignConfirmed',
          'PaLifeCycleChanged',
          'PaAttributesUpdated',
          'PaAccessRightsUpdated',
          'PaChartRecalculated') THEN
         
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         IF UNAPIEV.P_EV_REC.EV_TP = 'PaSpecsUpdated' THEN
            

            L_RET_CODE :=
               UNAPIEVP.EVALALARMHANDLING(UNAPIEV.P_ALARMS_HANDLED, UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE,
                                         UNAPIEV.P_PA, UNAPIEV.P_PANODE, L_VALID_SPECSA,
                                         L_VALID_SPECSB, L_VALID_SPECSC,
                                         L_VALID_LIMITSA, L_VALID_LIMITSB,
                                         L_VALID_LIMITSC, L_VALID_TARGETA,
                                         L_VALID_TARGETB, L_VALID_TARGETC);
            IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
               INSERT INTO UTERROR(CLIENT_ID, APPLIC, WHO, LOGDATE, LOGDATE_TZ, API_NAME, ERROR_MSG)
               VALUES(UNAPIEV.P_EV_REC.CLIENT_ID, UNAPIEV.P_EV_REC.APPLIC, UNAPIGEN.P_USER, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 
                      'EventManager', 'EvalAlarmHandling returned ' || TO_CHAR(L_RET_CODE));
            END IF;
         END IF;

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'ParameterUpdated' THEN
                                  
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         IF NVL(UNAPIEV.P_SS_TO,'####') = '@D' THEN
            
            
            
            FOR L_ASSIGNED_METHODS_REC IN L_ASSIGNED_METHODS_CURSOR LOOP
               UNAPIEV.P_ME := L_ASSIGNED_METHODS_REC.ME;
               UNAPIEV.P_MENODE := L_ASSIGNED_METHODS_REC.MENODE;
   
               UNAPIEV.P_EV_REC.OBJECT_TP := 'me';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_ME;
               UNAPIEV.P_EV_REC.OBJECT_LC := L_ASSIGNED_METHODS_REC.LC;
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := L_ASSIGNED_METHODS_REC.LC_VERSION;
               UNAPIEV.P_EV_REC.OBJECT_SS := L_ASSIGNED_METHODS_REC.SS;
               UNAPIEV.P_SS_TO := '@D';

               
               
               
               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'menode='||UNAPIEV.P_MENODE||'#mt_version='||UNAPIEV.P_MT_VERSION||
                     '#reanalysis='||UNAPIEV.P_REANALYSIS;
               END IF;
         





   
               
               
               
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
   
               
               
               
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            
            END LOOP;
         END IF;

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN

         
         
         
         UNAPIEV3.UPDATESCPGALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, FALSE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'PaActivate' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         
         
         
         
         
         BEGIN
            SELECT DELAYED_TILL 
            INTO L_REF_DATE
            FROM UTDELAY
            WHERE OBJECT_TP = 'me'
            AND SC = UNAPIEV.P_SC
            AND PG = UNAPIEV.P_PG
            AND PGNODE = UNAPIEV.P_PGNODE
            AND PA = UNAPIEV.P_PA
            AND PANODE = UNAPIEV.P_PANODE;
         EXCEPTION
         WHEN NO_DATA_FOUND THEN
            L_REF_DATE := UNAPIEV2.L_CURRENT_TIMESTAMP;
         END;

         
         
         
         
         DELETE FROM UTDELAY
         WHERE SC = UNAPIEV.P_SC
           AND PG = UNAPIEV.P_PG
           AND PGNODE = UNAPIEV.P_PGNODE
           AND PA = UNAPIEV.P_PA
           AND PANODE = UNAPIEV.P_PANODE;
           
         
         
         
         
         DELETE FROM UTEVTIMED
         WHERE OBJECT_TP = 'me'
           AND INSTR(EV_DETAILS, 'sc=' || UNAPIEV.P_SC) <> 0
           AND INSTR(EV_DETAILS, 'pg=' || UNAPIEV.P_PG) <> 0
           AND INSTR(EV_DETAILS, 'pgnode=' ||
               TO_CHAR(UNAPIEV.P_PGNODE)) <> 0
           AND INSTR(EV_DETAILS, 'pa=' || UNAPIEV.P_PA) <> 0
           AND INSTR(EV_DETAILS, 'panode=' ||
               TO_CHAR(UNAPIEV.P_PANODE)) <> 0
           AND EV_TP = 'MeActivate';
   
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
   
         
         
         
         L_FETCHED := FALSE;
         FOR L_ASSIGNED_METHODS_REC IN L_ASSIGNED_METHODS_CURSOR LOOP
            UNAPIEV.P_ME := L_ASSIGNED_METHODS_REC.ME;
            UNAPIEV.P_MENODE := L_ASSIGNED_METHODS_REC.MENODE;
            UNAPIEV.P_SS_TO := '';
   
            
            
            
            
            IF NVL(L_ASSIGNED_METHODS_REC.DELAY, 0) = 0 THEN
               
               
               
               L_EV_SEQ_NR := -1;
               L_TIMED_EVENT_TP := 'MeActivate';
               L_EV_DETAILS := 'sc=' || UNAPIEV.P_SC || 
                               '#pg=' || UNAPIEV.P_PG || 
                               '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) || 
                               '#pa=' || UNAPIEV.P_PA || 
                               '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) || 
                               '#menode=' || TO_CHAR(UNAPIEV.P_MENODE) ||
                               '#mt_version=' || L_ASSIGNED_METHODS_REC.MT_VERSION;
               L_RESULT :=
                  UNAPIEV.INSERTEVENT('Event~PaActivate',
                                      UNAPIGEN.P_EVMGR_NAME,
                                      'me', UNAPIEV.P_ME,
                                      L_ASSIGNED_METHODS_REC.LC,
                                      L_ASSIGNED_METHODS_REC.LC_VERSION,
                                      L_ASSIGNED_METHODS_REC.SS,
                                      L_TIMED_EVENT_TP, L_EV_DETAILS,
                                      L_EV_SEQ_NR);
               IF L_RESULT <> UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIGEN.P_TXN_ERROR := L_RESULT;
                  RAISE STPERROR;
               END IF;
            ELSE       
               L_RET_CODE := UNAPIAUT.CALCULATEDELAY(L_ASSIGNED_METHODS_REC.DELAY,
                                                     L_ASSIGNED_METHODS_REC.DELAY_UNIT,
                                                     L_REF_DATE, L_DELAYED_TILL);
   
               
               
               
               INSERT INTO UTDELAY(SC, PG, PGNODE,
                                   PA, PANODE, ME, MENODE, OBJECT_TP,
                                   DELAY, DELAY_UNIT, DELAYED_FROM, DELAYED_FROM_TZ,
                                   DELAYED_TILL,DELAYED_TILL_TZ)
               VALUES(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE, UNAPIEV.P_ME, UNAPIEV.P_MENODE,
                      'me', L_ASSIGNED_METHODS_REC.DELAY,
                      L_ASSIGNED_METHODS_REC.DELAY_UNIT, L_REF_DATE, L_REF_DATE,
                      L_DELAYED_TILL,L_DELAYED_TILL);
   
               
               
               
               L_EV_SEQ_NR := -1;
               L_TIMED_EVENT_TP := 'MeActivate';
               L_EV_DETAILS := 'sc=' || UNAPIEV.P_SC || 
                               '#pg=' || UNAPIEV.P_PG || 
                               '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) || 
                               '#pa=' || UNAPIEV.P_PA || 
                               '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) || 
                               '#menode=' || TO_CHAR(UNAPIEV.P_MENODE) ||
                               '#mt_version=' || L_ASSIGNED_METHODS_REC.MT_VERSION;
               L_RESULT :=
                  UNAPIEV.INSERTTIMEDEVENT('Event~PaActivate',
                                           UNAPIGEN.P_EVMGR_NAME,
                                           'me', UNAPIEV.P_ME,
                                           L_ASSIGNED_METHODS_REC.LC,
                                           L_ASSIGNED_METHODS_REC.LC_VERSION,
                                           L_ASSIGNED_METHODS_REC.SS,
                                           L_TIMED_EVENT_TP, L_EV_DETAILS,
                                           L_EV_SEQ_NR, L_DELAYED_TILL);
               IF L_RESULT <> UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIGEN.P_TXN_ERROR := L_RESULT;
                  RAISE STPERROR;
               END IF;
   
               
               
               
               UNAPIEV.P_SS_TO := '@D';
            END IF;
   
            UNAPIEV.P_EV_REC.OBJECT_TP := 'me';
            UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_ME;
            UNAPIEV.P_EV_REC.OBJECT_LC := L_ASSIGNED_METHODS_REC.LC;
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := L_ASSIGNED_METHODS_REC.LC_VERSION;
            UNAPIEV.P_EV_REC.OBJECT_SS := L_ASSIGNED_METHODS_REC.SS;
   
            
            
            
            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);
   
            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'menode='||UNAPIEV.P_MENODE||'#mt_version='||UNAPIEV.P_MT_VERSION||
                  '#reanalysis='||UNAPIEV.P_REANALYSIS;
            END IF;
         
            
            
            
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);





   
            
            
            
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
         
         
         
         END LOOP;
   
         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP IN ('PaResultUpdated',
                                    'ParameterDeleted') THEN
                                   
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.EV_TP = 'PaResultUpdated' AND UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         

         L_RET_CODE :=
            UNAPIEVP.EVALALARMHANDLING(UNAPIEV.P_ALARMS_HANDLED, UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE,
                                      UNAPIEV.P_PA, UNAPIEV.P_PANODE, L_VALID_SPECSA,
                                      L_VALID_SPECSB, L_VALID_SPECSC,
                                      L_VALID_LIMITSA, L_VALID_LIMITSB,
                                      L_VALID_LIMITSC, L_VALID_TARGETA,
                                      L_VALID_TARGETB, L_VALID_TARGETC);
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
            INSERT INTO UTERROR(CLIENT_ID, APPLIC, WHO, LOGDATE, LOGDATE_TZ, API_NAME, ERROR_MSG)
            VALUES(UNAPIEV.P_EV_REC.CLIENT_ID, UNAPIEV.P_EV_REC.APPLIC, UNAPIGEN.P_USER, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 
                   'EventManager', 'EvalAlarmHandling returned ' || TO_CHAR(L_RET_CODE));
         END IF;
         
         OPEN L_SCPA_CURSOR(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE);
         FETCH L_SCPA_CURSOR
         INTO L_SCPA_REC;
         CLOSE L_SCPA_CURSOR;
         
         L_RET_CODE :=
            UNAPIEVP.CHECKSQCRULES(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE,
                                   UNAPIEV.P_PA, UNAPIEV.P_PANODE,
                                   L_SCPA_REC.VALUE_F, UNAPIEV.P_VALID_SQC);
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
            INSERT INTO UTERROR(CLIENT_ID, APPLIC, WHO, LOGDATE, LOGDATE_TZ, API_NAME, ERROR_MSG)
            VALUES(UNAPIEV.P_EV_REC.CLIENT_ID, UNAPIEV.P_EV_REC.APPLIC, UNAPIGEN.P_USER, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
                   'EventManager', 'CheckSQCRules returned ' || TO_CHAR(L_RET_CODE));
         END IF;

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN      
         
         
         
         
         
         
         
         IF UNAPIEV.P_EV_REC.EV_TP = 'PaResultUpdated' THEN
            UNAPIEV3.UPDATESCPGALLDATES(TRUE, TRUE);
         ELSE
            UNAPIEV3.UPDATESCPGALLDATES(FALSE, TRUE);         
         END IF;
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         
         
         
         
         IF UNAPIEV.P_EV_REC.EV_TP = 'PaResultUpdated' THEN
            UNAPIEV3.UPDATESCALLDATES(TRUE, TRUE);
         ELSE
            UNAPIEV3.UPDATESCALLDATES(FALSE, TRUE);
         END IF;

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         
         
         
         
         IF UNAPIEV.P_EV_REC.EV_TP = 'PaResultUpdated' THEN
            UNAPIEV3.UPDATERQALLDATES(TRUE, TRUE);
         ELSE
            UNAPIEV3.UPDATERQALLDATES(FALSE, TRUE);
         END IF;

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         
         
         
         
         IF UNAPIEV.P_EV_REC.EV_TP = 'PaResultUpdated' THEN
            UNAPIEV3.UPDATESDALLDATES(TRUE, TRUE);
         ELSE
            UNAPIEV3.UPDATESDALLDATES(FALSE, TRUE);
         END IF;

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;
   END IF;
END HANDLESCPAEVENTS;

PROCEDURE HANDLESCMEEVENTS   
IS

CURSOR L_SCMEREANAL_CURSOR IS
   SELECT REANALYSIS
   FROM UTSCME
   WHERE SC = UNAPIEV.P_SC
     AND PG = UNAPIEV.P_PG
     AND PGNODE = UNAPIEV.P_PGNODE
     AND PA = UNAPIEV.P_PA
     AND PANODE = UNAPIEV.P_PANODE
     AND ME = UNAPIEV.P_ME
     AND MENODE = UNAPIEV.P_MENODE;
L_NEXT_CELL   VARCHAR2(20);

BEGIN
   
   
   
   IF UNAPIEV.P_EV_REC.EV_TP = 'MethodCreated' THEN
                              
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG('MethodCreated');
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         END IF;
         





         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNACCESS.INITOBJECTACCESSRIGHTS(UNAPIEV.P_EV_REC.OBJECT_TP,
                                                       UNAPIEV.P_EV_REC.OBJECT_ID, L_AR);
         IF UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG('      InitObjectAR: '|| L_RET_CODE);
         END IF;
         IF L_RET_CODE = UNAPIGEN.DBERR_SUCCESS THEN
            
            L_SQL_STRING := 'UPDATE utscme SET ';
            FOR I IN 1..UNAPIGEN.P_DATADOMAINS LOOP
               IF I < UNAPIGEN.P_DATADOMAINS THEN
                  L_SQL_STRING := L_SQL_STRING || 'ar' || I || ' = :ar' || I || ', ';
               ELSE
                  L_SQL_STRING := L_SQL_STRING || 'ar' || I || ' = :ar' || I;
               END IF;
            END LOOP;
            L_SQL_STRING := L_SQL_STRING || ' WHERE sc = :sc ' ||  
                            'AND pg = :pg ' || 
                            'AND pgnode = :pgnode ' ||
                            'AND pa = :pa ' || 
                            'AND panode = :panode ' ||
                            'AND me = :me ' || 
                            'AND menode = :menode ';
            DBMS_SQL.PARSE(UNAPIEV.L_OBJ_CURSOR, L_SQL_STRING, DBMS_SQL.V7); 
            FOR I IN 1..UNAPIGEN.P_DATADOMAINS LOOP
               DBMS_SQL.BIND_VARIABLE_CHAR(UNAPIEV.L_OBJ_CURSOR, ':ar'|| I, L_AR(I), 1);
            END LOOP;
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':sc', UNAPIEV.P_SC);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pg', UNAPIEV.P_PG);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pgnode', UNAPIEV.P_PGNODE);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':pa', UNAPIEV.P_PA);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':panode', UNAPIEV.P_PANODE);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':me', UNAPIEV.P_ME);
            DBMS_SQL.BIND_VARIABLE(UNAPIEV.L_OBJ_CURSOR, ':menode', UNAPIEV.P_MENODE);
            L_RESULT := DBMS_SQL.EXECUTE(UNAPIEV.L_OBJ_CURSOR);
         END IF;
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         
         
         
         UNAPIEV3.UPDATESCPAALLDATES(TRUE, FALSE);         
         
         
         
         
         
         
         
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
                  UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
      
         
         
         
         UNAPIEV3.UPDATESCPGALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, FALSE);

         
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, FALSE);
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, FALSE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         
         UNAPIEV.P_REANALYSIS := 0;
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP
            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;
            
            
            
            UNAPIEV3.UPDATEWSALLDATES(TRUE, FALSE);

            

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;
   
   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'MeStatusChanged' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      OPEN L_SCMEREANAL_CURSOR;
      FETCH L_SCMEREANAL_CURSOR
      INTO UNAPIEV.P_REANALYSIS;
      CLOSE L_SCMEREANAL_CURSOR;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         
         
         
         
         
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;





         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP
            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;

            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'MeCanceled' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;
   
      
      OPEN L_SCMEREANAL_CURSOR;
      FETCH L_SCMEREANAL_CURSOR
      INTO UNAPIEV.P_REANALYSIS;
      CLOSE L_SCMEREANAL_CURSOR;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         
         
         
         
         
         
         UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
            'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         
         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;





         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         UNAPIEV3.UPDATESCPAALLDATES(TRUE, TRUE);               
                      
         L_RET_CODE := UNAPIPAP.EVALPACALCULATION(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA,
                                                      UNAPIEV.P_PANODE, L_CAL_RESULT);
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS AND
            UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG('EvalPaCalculation#return=' || TO_CHAR(L_RET_CODE)
                   || '#sc=' || UNAPIEV.P_SC || '#pg=' || UNAPIEV.P_PG || '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) 
                   || '#pa=' || UNAPIEV.P_PA || '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) );
         END IF;
         
         
         
         
         IF L_CAL_RESULT = '0' THEN
            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'pr_version='||UNAPIEV.P_PR_VERSION;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);

            UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
            UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
            UNAPIEV.P_EV_REC.OBJECT_LC := '';
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
            UNAPIEV.P_EV_REC.OBJECT_SS := '';
            UNAPIEV.P_SS_TO := '';

            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
               
               
               
               
               
               
               UNAPIEV3.UPDATESCPGALLDATES(TRUE, TRUE);

               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'pp_version='||UNAPIEV.P_PP_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
               UNAPIEV.P_EV_REC.OBJECT_LC := '';
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
               UNAPIEV.P_EV_REC.OBJECT_SS := '';
               UNAPIEV.P_SS_TO := '';
            END IF;

            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
               
               
               
               
               
               
               UNAPIEV3.UPDATESCALLDATES(TRUE, TRUE);

               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'st_version='||UNAPIEV.P_ST_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
               UNAPIEV.P_EV_REC.OBJECT_LC := '';
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
               UNAPIEV.P_EV_REC.OBJECT_SS := '';
               UNAPIEV.P_SS_TO := '';
            END IF;

            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
               
               
               
               
               
               
               UNAPIEV3.UPDATERQALLDATES(TRUE, TRUE);

               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'rt_version='||UNAPIEV.P_RT_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            END IF;

            
            
            IF UNAPIEV.P_SD IS NOT NULL THEN         
               
               
               
               
               
               
               UNAPIEV3.UPDATESDALLDATES(TRUE, TRUE);

               UNAPIEV3.CASCADEONSDLEVEL;
            END IF;

            UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
            UNAPIEV.P_EV_REC.OBJECT_ID := '';
            UNAPIEV.P_EV_REC.OBJECT_LC := '';
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
            UNAPIEV.P_EV_REC.OBJECT_SS := '';
            UNAPIEV.P_SS_TO := '';

            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
               FOR L_WSME_REC IN L_WSME_CURSOR LOOP
                  UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;  
                  UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;
                  
                  
                  
                  
                  
                  
                  
                  UNAPIEV3.UPDATEWSALLDATES(TRUE, TRUE);

                  L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

                  
                  IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                     UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                        'wt_version='||UNAPIEV.P_WT_VERSION;
                     
                     
                     UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
                  END IF;
         
                  UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
                  L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                                 UNAPIEV.P_TR_NO, L_TRANSITION_OK);
                  
                  
                  UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
               END LOOP;
            END IF;
         END IF;
      END IF;   
      
   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'MeReanalysis' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         
         
         
         
         
         
         UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
         UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
            'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;

         L_TRANSITION_OK := UNAPIGEN.DBERR_SUCCESS;





         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_EV_REC.OBJECT_SS);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_LC_SS_FROM,UNAPIEV.P_EV_REC.OBJECT_SS,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         
         
         
         
         
         
         
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         
         
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP
            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;  
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;

            
            
            
            

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;
      
   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'MeResultUpdated' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         END IF;
         






         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         L_RET_CODE := UNAPIPAP.EVALPACALCULATION(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA,
                                                 UNAPIEV.P_PANODE, L_CAL_RESULT);
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS AND
            UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG( 'EvalPaCalculation#return=' || TO_CHAR(L_RET_CODE)
                   || '#sc=' || UNAPIEV.P_SC || '#pg=' || UNAPIEV.P_PG || '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) 
                   || '#pa=' || UNAPIEV.P_PA || '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) );
         END IF;

         
         
         
         IF L_CAL_RESULT = '0' THEN
            UNAPIEV3.UPDATESCPAALLDATES(TRUE, FALSE);               
         
            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'pr_version='||UNAPIEV.P_PR_VERSION;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);

            UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
            UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
            UNAPIEV.P_EV_REC.OBJECT_LC := '';
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
            UNAPIEV.P_EV_REC.OBJECT_SS := '';
            UNAPIEV.P_SS_TO := '';
   
            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN                                             
               
               
               
               UNAPIEV3.UPDATESCPGALLDATES(TRUE, FALSE);

               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'pp_version='||UNAPIEV.P_PP_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
               UNAPIEV.P_EV_REC.OBJECT_LC := '';
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
               UNAPIEV.P_EV_REC.OBJECT_SS := '';
               UNAPIEV.P_SS_TO := '';
            END IF;
   
            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
               
               
               
               UNAPIEV3.UPDATESCALLDATES(TRUE, FALSE);

               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'st_version='||UNAPIEV.P_ST_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
               UNAPIEV.P_EV_REC.OBJECT_LC := '';
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
               UNAPIEV.P_EV_REC.OBJECT_SS := '';
               UNAPIEV.P_SS_TO := '';
            END IF;
   
            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
               
               
               
               UNAPIEV3.UPDATERQALLDATES(TRUE, FALSE);               
               
               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'rt_version='||UNAPIEV.P_RT_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            END IF;
            
            
            
            IF UNAPIEV.P_SD IS NOT NULL THEN         
               
               
               
               UNAPIEV3.UPDATESDALLDATES(TRUE, FALSE);               

               UNAPIEV3.CASCADEONSDLEVEL;
            END IF;
         END IF;
      END IF;

      
      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP
            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;

            
            
            
            
            
            
            UNAPIEV3.UPDATEWSALLDATES(TRUE, TRUE);

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;
      
   ELSIF UNAPIEV.P_EV_REC.EV_TP IN
        ('EvaluateMeDetails', 'MeLifeCycleChanged', 'MeActivate',
         'MeAttributesUpdated', 'MeGroupKeyUpdated',
         'MeDetailsDeleted', 'MeDetailsUpdated',
         'MeAccessRightsUpdated' ) THEN
        
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         END IF;
         






         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP

            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;
      
      IF UNAPIEV.P_EV_REC.EV_TP = 'EvaluateMeDetails' AND
         NVL(UNAPIEV.P_UPDATE_ME_LAB, '#') <> '#' THEN
            UPDATE UTSCME
            SET LAB = UNAPIEV.P_UPDATE_ME_LAB
            WHERE SC = UNAPIEV.P_SC
              AND PG = UNAPIEV.P_PG
              AND PGNODE = UNAPIEV.P_PGNODE
              AND PA = UNAPIEV.P_PA
              AND PANODE = UNAPIEV.P_PANODE
              AND ME = UNAPIEV.P_ME
              AND MENODE = UNAPIEV.P_MENODE;

            IF UNAPIEV.P_LOG_HS_DETAILS THEN
               INSERT INTO UTSCMEHSDETAILS(SC, PG, PGNODE, PA, PANODE, ME, MENODE, TR_SEQ,
                                           EV_SEQ, SEQ, DETAILS)
               VALUES(UNAPIEV.P_SC,  UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE, UNAPIEV.P_ME, UNAPIEV.P_MENODE, UNAPIGEN.P_TR_SEQ, UNAPIEV.P_EV_REC.EV_SEQ, 1,
                      'method "'||UNAPIEV.P_ME||'" is updated: property <lab> changed value to "' ||UNAPIEV.P_UPDATE_ME_LAB || '".');
            END IF;
      END IF ;
      
      IF UNAPIEV.P_EV_REC.EV_TP = 'MeDetailsUpdated' AND
         UNAPIEV.P_CLIENT_EVMGR_USED = 'YES' AND
         INSTR(UNAPIEV.P_EV_REC.EV_DETAILS,'completed=0')<>0 AND 
         INSTR(UNAPIEV.P_EV_REC.EV_DETAILS,'a_completed_arg=0')<>0 THEN
                                                        
                                                        
                                                        
                                                        
                                                        
                                                        
                                                        
         
         
         
         OPEN L_SCMECELL_CHECK_CURSOR(UNAPIEV.P_SC, 
                                      UNAPIEV.P_PG, UNAPIEV.P_PGNODE, 
                                      UNAPIEV.P_PA, UNAPIEV.P_PANODE, 
                                      UNAPIEV.P_ME, UNAPIEV.P_MENODE);
         FETCH L_SCMECELL_CHECK_CURSOR
         INTO L_COUNT;
         CLOSE L_SCMECELL_CHECK_CURSOR;
         IF L_COUNT>0 THEN
             L_RET_CODE := UNAPIEV.ALERTSEND('EvaluateMeDetails','sc='||UNAPIEV.P_SC||
                                             '#pg='||UNAPIEV.P_PG||'#pgnode='||TO_CHAR(UNAPIEV.P_PGNODE)||
                                             '#pa='||UNAPIEV.P_PA||'#panode='||TO_CHAR(UNAPIEV.P_PANODE)||
                                             '#me='||UNAPIEV.P_ME||'#menode='||TO_CHAR(UNAPIEV.P_MENODE)||
                                             '#reanalysis='||TO_CHAR(UNAPIEV.P_REANALYSIS)
                                             );
             IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
                DBMS_OUTPUT.PUT_LINE('Error returned by  AlertSend:'||L_RET_CODE);
             END IF;
             IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS AND
                UNAPIEV.P_EV_OUTPUT_ON THEN
                UNTRACE.LOG('AlertSend#return=' || TO_CHAR(L_RET_CODE)
                       || '#alert_name=EvaluateMeDetails#alert_details='||'sc='||UNAPIEV.P_SC||
                                             '#pg='||UNAPIEV.P_PG||'#pgnode='||TO_CHAR(UNAPIEV.P_PGNODE)||
                                             '#pa='||UNAPIEV.P_PA||'#panode='||TO_CHAR(UNAPIEV.P_PANODE)||
                                             '#me='||UNAPIEV.P_ME||'#menode='||TO_CHAR(UNAPIEV.P_MENODE)||
                                             '#reanalysis='||TO_CHAR(UNAPIEV.P_REANALYSIS)
                                             );
             END IF;
         END IF;         
      ELSIF UNAPIEV.P_EV_REC.EV_TP = 'EvaluateMeDetails' AND
            UNAPIEV.P_CLIENT_EVMGR_USED = 'YES'              THEN
         
         L_RET_CODE := UNAPIEV.ALERTSEND('EvaluateMeDetails','sc='||UNAPIEV.P_SC||
                                         '#pg='||UNAPIEV.P_PG||'#pgnode='||TO_CHAR(UNAPIEV.P_PGNODE)||
                                         '#pa='||UNAPIEV.P_PA||'#panode='||TO_CHAR(UNAPIEV.P_PANODE)||
                                         '#me='||UNAPIEV.P_ME||'#menode='||TO_CHAR(UNAPIEV.P_MENODE)||
                                         '#reanalysis='||TO_CHAR(UNAPIEV.P_REANALYSIS)
                                        );
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
            DBMS_OUTPUT.PUT_LINE('Error returned by  AlertSend:'||L_RET_CODE);
         END IF;
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS AND
             UNAPIEV.P_EV_OUTPUT_ON THEN
             UNTRACE.LOG('AlertSend#return=' || TO_CHAR(L_RET_CODE)
                    || '#alert_name=EvaluateMeDetails#alert_details='||'sc='||UNAPIEV.P_SC||
                                             '#pg='||UNAPIEV.P_PG||'#pgnode='||TO_CHAR(UNAPIEV.P_PGNODE)||
                                             '#pa='||UNAPIEV.P_PA||'#panode='||TO_CHAR(UNAPIEV.P_PANODE)||
                                             '#me='||UNAPIEV.P_ME||'#menode='||TO_CHAR(UNAPIEV.P_MENODE)||
                                             '#reanalysis='||TO_CHAR(UNAPIEV.P_REANALYSIS)
                                             );
         END IF;
      END IF;         

   
   
   
   ELSIF UNAPIEV.P_EV_REC.EV_TP IN ('MethodUpdated','WorksheetCompleted','MethodImported') THEN
                                  
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         END IF;
         






         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         UNAPIEV3.UPDATESCPAALLDATES(TRUE, FALSE);                     

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         UNAPIEV3.UPDATESCPGALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, FALSE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP
            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;
            
            
            
            UNAPIEV3.UPDATEWSALLDATES(TRUE, FALSE);

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;
   
   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'MethodDeleted' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         
         
         
         
         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         L_RET_CODE := UNAPIPAP.EVALPACALCULATION(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA,
                                                 UNAPIEV.P_PANODE, L_CAL_RESULT);
         IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS AND
            UNAPIEV.P_EV_OUTPUT_ON THEN
            UNTRACE.LOG('EvalPaCalculation#return=' || TO_CHAR(L_RET_CODE)
                   || '#sc=' || UNAPIEV.P_SC || '#pg=' || UNAPIEV.P_PG || '#pgnode=' || TO_CHAR(UNAPIEV.P_PGNODE) 
                   || '#pa=' || UNAPIEV.P_PA || '#panode=' || TO_CHAR(UNAPIEV.P_PANODE) );
         END IF;
   
         
         
         
         IF L_CAL_RESULT = '0' THEN
            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);
 
            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'pr_version='||UNAPIEV.P_PR_VERSION;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);

            UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
            UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
            UNAPIEV.P_EV_REC.OBJECT_LC := '';
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
            UNAPIEV.P_EV_REC.OBJECT_SS := '';
            UNAPIEV.P_SS_TO := '';
   
            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'pp_version='||UNAPIEV.P_PP_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
               UNAPIEV.P_EV_REC.OBJECT_LC := '';
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
               UNAPIEV.P_EV_REC.OBJECT_SS := '';
               UNAPIEV.P_SS_TO := '';
            END IF;
   
            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'st_version='||UNAPIEV.P_ST_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);

               UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
               UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
               UNAPIEV.P_EV_REC.OBJECT_LC := '';
               UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
               UNAPIEV.P_EV_REC.OBJECT_SS := '';
               UNAPIEV.P_SS_TO := '';
            END IF;
   
            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
               L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

               
               IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                  UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                  UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                     'rt_version='||UNAPIEV.P_RT_VERSION;
               END IF;
         
               UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
               L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                              UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            END IF;

            
            
            IF UNAPIEV.P_SD IS NOT NULL THEN         
               UNAPIEV3.CASCADEONSDLEVEL;
            END IF;

            UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
            UNAPIEV.P_EV_REC.OBJECT_ID := '';
            UNAPIEV.P_EV_REC.OBJECT_LC := '';
            UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
            UNAPIEV.P_EV_REC.OBJECT_SS := '';
            UNAPIEV.P_SS_TO := '';

            
            
            IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
               
               FOR L_WSME_REC IN L_WSME_CURSOR LOOP
                  UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
                  UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;
                  
                  
                  
                  UNAPIEV3.UPDATEWSALLDATES(FALSE, TRUE);

                  L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

                  
                  IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
                     UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
                     UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                        'wt_version='||UNAPIEV.P_WT_VERSION;
                     
                     
                     UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
                  END IF;
         
                  UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
                  L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                                 UNAPIEV.P_TR_NO, L_TRANSITION_OK);
                  
                  
                  UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
               END LOOP;
            END IF;
         END IF;
      END IF;

   ELSIF UNAPIEV.P_EV_REC.EV_TP = 'MeDetailsCreated' THEN
                                 
      IF UNAPIEV.P_EV_OUTPUT_ON THEN
         UNTRACE.LOG(UNAPIEV.P_EV_REC.EV_TP);
      END IF;
      UNAPIEV2.L_EVENT_PROCESSED := TRUE;

      
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'me' THEN
         
         IF P_STARTMETHODONCELLCREATION = '1' THEN
            
            OPEN L_SCMEOLDDATES_CURSOR(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE, UNAPIEV.P_ME, UNAPIEV.P_MENODE);
            FETCH L_SCMEOLDDATES_CURSOR
            INTO L_LOG_HS_DETAILS, L_OLD_START_DATE, L_OLD_END_DATE;
            CLOSE L_SCMEOLDDATES_CURSOR;
            L_NEW_START_DATE := L_OLD_START_DATE;

            UPDATE UTSCME
            SET EXEC_START_DATE    = UNAPIEV2.L_CURRENT_TIMESTAMP,
                EXEC_START_DATE_TZ = UNAPIEV2.L_CURRENT_TIMESTAMP
            WHERE SC = UNAPIEV.P_SC
              AND PG = UNAPIEV.P_PG
              AND PGNODE = UNAPIEV.P_PGNODE
              AND PA = UNAPIEV.P_PA
              AND PANODE = UNAPIEV.P_PANODE
              AND ME = UNAPIEV.P_ME
              AND MENODE = UNAPIEV.P_MENODE
              AND EXEC_START_DATE IS NULL
            RETURNING EXEC_START_DATE_TZ
            INTO L_NEW_START_DATE;

            IF L_LOG_HS_DETAILS = '1' THEN 
               IF NVL((L_OLD_START_DATE <> L_NEW_START_DATE), TRUE) AND NOT(L_OLD_START_DATE IS NULL AND L_NEW_START_DATE IS NULL)  THEN 
                  INSERT INTO UTSCMEHSDETAILS (SC, PG, PGNODE, PA, PANODE, ME, MENODE, TR_SEQ, EV_SEQ, SEQ, DETAILS)
                  VALUES
                  (UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE, UNAPIEV.P_ME, UNAPIEV.P_MENODE, 
                     UNAPIGEN.P_TR_SEQ, UNAPIEV.P_EV_REC.EV_SEQ, 1, 'method "'||UNAPIEV.P_ME||'" is updated: property <exec_start_date> changed value from "' ||
                  TO_CHAR(L_OLD_START_DATE, UNAPIGEN.P_JOBS_DATE_FORMAT) || '" to "' || TO_CHAR(L_NEW_START_DATE, UNAPIGEN.P_JOBS_DATE_FORMAT) || '".');
               END IF;
            END IF;

            
            
            
            L_RET_CODE := UNAPIME2.UPDATELINKEDSCMECELL(A_SC => UNAPIEV.P_SC,
                                                        A_PG => UNAPIEV.P_PG,
                                                        A_PGNODE => UNAPIEV.P_PGNODE,
                                                        A_PA => UNAPIEV.P_PA,
                                                        A_PANODE => UNAPIEV.P_PANODE,
                                                        A_ME => UNAPIEV.P_ME,
                                                        A_MENODE => UNAPIEV.P_MENODE,
                                                        A_ME_STD_PROPERTY => 'exec_start_date',
                                                        A_MT_VERSION => NULL,
                                                        A_DESCRIPTION => NULL,
                                                        A_UNIT => NULL,
                                                        A_EXEC_START_DATE => UNAPIEV2.L_CURRENT_TIMESTAMP,
                                                        A_EXEC_END_DATE => NULL,
                                                        A_EXECUTOR => NULL,
                                                        A_LAB => NULL,
                                                        A_EQ => NULL,
                                                        A_EQ_VERSION => NULL,
                                                        A_PLANNED_EXECUTOR => NULL,
                                                        A_PLANNED_EQ => NULL,
                                                        A_PLANNED_EQ_VERSION => NULL,
                                                        A_DELAY => NULL,
                                                        A_DELAY_UNIT => NULL,
                                                        A_FORMAT => NULL,
                                                        A_ACCURACY => NULL,
                                                        A_REAL_COST => NULL,
                                                        A_REAL_TIME => NULL,
                                                        A_SOP => NULL,
                                                        A_SOP_VERSION => NULL,
                                                        A_PLAUS_LOW => NULL,
                                                        A_PLAUS_HIGH => NULL,
                                                        A_ME_CLASS => NULL);

            IF L_RET_CODE <> UNAPIGEN.DBERR_SUCCESS THEN
               INSERT INTO UTERROR(CLIENT_ID, APPLIC, WHO, LOGDATE, LOGDATE_TZ, API_NAME, ERROR_MSG)
               VALUES(UNAPIEV.P_EV_REC.CLIENT_ID, UNAPIEV.P_EV_REC.APPLIC, UNAPIGEN.P_USER, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
                      'EventManager', 'UpdateLinkedScMeCell returned' || TO_CHAR(L_RET_CODE)||
                                      'for exec_start_date '||UNAPIEV2.L_CURRENT_TIMESTAMP);
            END IF;
         END IF;
        
          IF UNAPIEV.P_UPDATE_NEXT_CELL='1' THEN
            
            OPEN UNAPIME.C_FIRST_EMPTY_CELL_CURSOR(UNAPIEV.P_SC, UNAPIEV.P_PG, UNAPIEV.P_PGNODE, UNAPIEV.P_PA, UNAPIEV.P_PANODE,
                                                   UNAPIEV.P_ME, UNAPIEV.P_MENODE);
            FETCH UNAPIME.C_FIRST_EMPTY_CELL_CURSOR INTO L_NEXT_CELL;
            IF UNAPIME.C_FIRST_EMPTY_CELL_CURSOR%NOTFOUND THEN
               L_NEXT_CELL := NULL;
            END IF;
            CLOSE UNAPIME.C_FIRST_EMPTY_CELL_CURSOR;
            
            UPDATE UTSCME
            SET NEXT_CELL = L_NEXT_CELL
            WHERE SC = UNAPIEV.P_SC AND PG = UNAPIEV.P_PG AND PGNODE = UNAPIEV.P_PGNODE
              AND PA = UNAPIEV.P_PA AND PANODE = UNAPIEV.P_PANODE
              AND ME = UNAPIEV.P_ME AND MENODE = UNAPIEV.P_MENODE;
         END IF;


         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'me';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'mt_version='||UNAPIEV.P_MT_VERSION||'#reanalysis='||UNAPIEV.P_REANALYSIS;
         END IF;
         






         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pa';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PA;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pa' THEN
         UNAPIEV3.UPDATESCPAALLDATES(TRUE, FALSE);                     
         
         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pa';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pr_version='||UNAPIEV.P_PR_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'pg';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_PG;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'pg' THEN
         
         
         
         UNAPIEV3.UPDATESCPGALLDATES(TRUE, FALSE);         

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'pg';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'pp_version='||UNAPIEV.P_PP_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'sc';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_SC;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'sc' THEN
         
         
         
         UNAPIEV3.UPDATESCALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'sc';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'st_version='||UNAPIEV.P_ST_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);

         UNAPIEV.P_EV_REC.OBJECT_TP := 'rq';
         UNAPIEV.P_EV_REC.OBJECT_ID := UNAPIEV.P_RQ;
         UNAPIEV.P_EV_REC.OBJECT_LC := '';
         UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
         UNAPIEV.P_EV_REC.OBJECT_SS := '';
         UNAPIEV.P_SS_TO := '';
      END IF;
   
      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'rq' AND UNAPIEV.P_RQ IS NOT NULL THEN
         
         
         
         UNAPIEV3.UPDATERQALLDATES(TRUE, FALSE);

         L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

         
         IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
            UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'rq';
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
            UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
               'rt_version='||UNAPIEV.P_RT_VERSION;
         END IF;
         
         UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
         L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                        UNAPIEV.P_TR_NO, L_TRANSITION_OK);
      END IF;      

      
      
      IF UNAPIEV.P_SD IS NOT NULL THEN         
         
         
         
         UNAPIEV3.UPDATESDALLDATES(TRUE, FALSE);

         UNAPIEV3.CASCADEONSDLEVEL;
      END IF;

      UNAPIEV.P_EV_REC.OBJECT_TP := 'ws';
      UNAPIEV.P_EV_REC.OBJECT_ID := '';
      UNAPIEV.P_EV_REC.OBJECT_LC := '';
      UNAPIEV.P_EV_REC.OBJECT_LC_VERSION := '';
      UNAPIEV.P_EV_REC.OBJECT_SS := '';
      UNAPIEV.P_SS_TO := '';

      
      
      IF UNAPIEV.P_EV_REC.OBJECT_TP = 'ws' THEN
         
         FOR L_WSME_REC IN L_WSME_CURSOR LOOP
            UNAPIEV.P_EV_REC.OBJECT_ID := L_WSME_REC.WS;         
            UNAPIEV.P_WS := UNAPIEV.P_EV_REC.OBJECT_ID;
            
            
            
            UNAPIEV3.UPDATEWSALLDATES(TRUE, FALSE);

            L_TRANSITION_OK := UNAPIEV.EVALLIFECYCLE(UNAPIEV.P_SS_TO, UNAPIEV.P_TR_NO);

            
            IF L_TRANSITION_OK = UNAPIGEN.DBERR_SUCCESS THEN
               UNAPIEV.P_EV_TR_COUNT := UNAPIEV.P_EV_TR.COUNT + 1;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TP         := 'ws';
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).ID         := UNAPIEV.P_EV_REC.OBJECT_ID;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC         := UNAPIEV.P_EV_REC.OBJECT_LC;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_VERSION := UNAPIEV.P_EV_REC.OBJECT_LC_VERSION;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_FROM    := UNAPIEV.P_EV_REC.OBJECT_SS;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).SS_TO      := UNAPIEV.P_SS_TO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).TR_NO      := UNAPIEV.P_TR_NO;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).LC_SS_FROM := UNAPIEV.P_LC_SS_FROM;
               UNAPIEV.P_EV_TR(UNAPIEV.P_EV_TR_COUNT).EV_DETAILS := 
                  'wt_version='||UNAPIEV.P_WT_VERSION;
               
               
               UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
            END IF;
         
            UNAPIEV.UPDATEOPALOBJECTRECORD(UNAPIEV.P_SS_TO);
            L_RET_CODE := UNAPIEV.EXECUTETRACTIONS(UNAPIEV.P_EV_REC.OBJECT_SS,UNAPIEV.P_SS_TO,
                                           UNAPIEV.P_TR_NO, L_TRANSITION_OK);
            
            
            UNAPIEV3.CHECK4HANDLESCMECELLOUTPUT;
         END LOOP;
      END IF;
   END IF;
EXCEPTION
WHEN OTHERS THEN
   RAISE;
END HANDLESCMEEVENTS;

BEGIN
P_STARTMETHODONCELLCREATION := '0';
OPEN C_SYSTEM('STARTMEONCELLCREATE');
FETCH C_SYSTEM
INTO P_STARTMETHODONCELLCREATION;
CLOSE C_SYSTEM;
END UNAPIEV4;