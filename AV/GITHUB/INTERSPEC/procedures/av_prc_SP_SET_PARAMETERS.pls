CREATE OR REPLACE PROCEDURE SP_SET_PARAMETERS IS





















 L_NLS_TERRITORY             V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_LANGUAGE              V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_CURRENCY              V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_ISO_CURRENCY          V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_NUMERIC_CHARACTERS    V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_DATE_FORMAT           V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_DATE_LANGUAGE         V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_CHARACTERSET          V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_SORT                  V$NLS_PARAMETERS.VALUE%TYPE;
 L_NLS_CALENDAR              V$NLS_PARAMETERS.VALUE%TYPE;
 L_SQL_STRING                VARCHAR2(2000);
 L_SYS_CURSOR                NUMBER;
 L_RESULT                    NUMBER;
 V_ERROR_TRACE               NUMBER:=0;

 BEGIN

 SELECT VALUE
 INTO L_NLS_TERRITORY
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_TERRITORY';
 SELECT VALUE
 INTO L_NLS_LANGUAGE
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_LANGUAGE';
 SELECT VALUE
 INTO L_NLS_CURRENCY
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_CURRENCY';
 SELECT VALUE
 INTO L_NLS_ISO_CURRENCY
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_ISO_CURRENCY';
 SELECT '.,'
 INTO L_NLS_NUMERIC_CHARACTERS
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_NUMERIC_CHARACTERS';
 SELECT VALUE
 INTO L_NLS_DATE_FORMAT
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_DATE_FORMAT';
 SELECT VALUE
 INTO L_NLS_DATE_LANGUAGE
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_DATE_LANGUAGE';
 SELECT VALUE
 INTO L_NLS_CHARACTERSET
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_CHARACTERSET';
 SELECT VALUE
 INTO L_NLS_SORT
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_SORT';
 SELECT VALUE
 INTO L_NLS_CALENDAR
 FROM V$NLS_PARAMETERS
 WHERE PARAMETER = 'NLS_CALENDAR';
 
 L_SYS_CURSOR := DBMS_SQL.OPEN_CURSOR;
 V_ERROR_TRACE := 1;
 L_SQL_STRING := 'ALTER SESSION SET NLS_LANGUAGE = ''' ||
              L_NLS_LANGUAGE || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 2;
 L_SQL_STRING := 'ALTER SESSION SET NLS_TERRITORY = ''' ||
              L_NLS_TERRITORY || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 3;
 L_SQL_STRING := 'ALTER SESSION SET NLS_CURRENCY = ''' ||
              L_NLS_CURRENCY || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 4;
 L_SQL_STRING := 'ALTER SESSION SET NLS_ISO_CURRENCY = ''' ||
              L_NLS_ISO_CURRENCY || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 5;
 L_SQL_STRING := 'ALTER SESSION SET NLS_DATE_FORMAT = ''' ||
              L_NLS_DATE_FORMAT || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 6;
 L_SQL_STRING := 'ALTER SESSION SET NLS_DATE_LANGUAGE = ''' ||
              L_NLS_DATE_LANGUAGE || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 7;

 




 V_ERROR_TRACE := 8;
 L_SQL_STRING := 'ALTER SESSION SET NLS_SORT = ''' ||
              L_NLS_SORT || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 9;
 L_SQL_STRING := 'ALTER SESSION SET NLS_CALENDAR = ''' ||
              L_NLS_CALENDAR || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 V_ERROR_TRACE := 10;
 L_SQL_STRING := 'ALTER SESSION SET NLS_NUMERIC_CHARACTERS = ''' ||
              L_NLS_NUMERIC_CHARACTERS || '''';
 DBMS_SQL.PARSE(L_SYS_CURSOR, L_SQL_STRING, DBMS_SQL.V7);
 L_RESULT := DBMS_SQL.EXECUTE(L_SYS_CURSOR);
 
 
 EXCEPTION
    WHEN OTHERS THEN
       RAISE_APPLICATION_ERROR(-20001,SQLERRM||'error '||V_ERROR_TRACE);

 END SP_SET_PARAMETERS;